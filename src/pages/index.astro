---
import Layout from "@/layouts/Layout.astro"

import AboutMe from "@/components/AboutMe.astro"
import Badge from "@/components/Badge.astro"
import Briefcase from "@/components/icons/Briefcase.astro"
import CodeIcon from "@/components/icons/Code.astro"
import Experience from "@/components/Experience.astro"
import GitHubIcon from "@/components/icons/GitHub.astro"
import LinkedInIcon from "@/components/icons/LinkedIn.astro"
import MailIcon from "@/components/icons/Mail.astro"
import CVIcon from "../components/icons/CV.astro"
import ProfileCheck from "@/components/icons/ProfileCheck.astro"
import Projects from "@/components/Projects.astro"
import SectionContainer from "@/components/SectionContainer.astro"
import SocialPill from "@/components/SocialPill.astro"
import GradualBlur from "@/components/GradualBlur.tsx"
---

<Layout
	title="Eliseo - Desarrollador Fullstack"
	description="Conoce mas de Eliseo Arévalo, desarrollador fullstack .net y javascript"
>
	<main class="px-4">
		<SectionContainer
			id="top"
			class="py-6 pb-12 flex flex-col items-center"
		>
			<div class="relative mx-auto max-w-4xl overflow-hidden">
				<div class="px-4 py-6">
					<div class="flex items-center gap-2 mb-4">
						<img
							class="h-10 w-10 rounded-full ring-2 ring-white dark:ring-black border border-white/20 dark:border-white/10 object-cover"
							src="/eliseo.png"
							alt="Foto de Eliseo Arévalo"
						/>
						<span class="inline-flex items-center gap-2 rounded-full border border-sky-200 dark:border-sky-900 bg-sky-50 text-sky-700 dark:bg-sky-500/10 dark:text-sky-300 px-2 py-1 text-xs">
							<span class="inline-block h-2 w-2 rounded-full bg-sky-500"></span>
							Disponible para trabajar
						</span>
					</div>
			<h1
				class="text-gray-900 dark:text-white text-2xl md:text-4xl lg:text-5xl font-bold pb-3"
			>
				Eliseo Arévalo
			</h1>
			<h2
				class="text-lg md:text-xl text-balance max-w-[700px] text-black dark:text-white leading-relaxed"
			>
				<span>Si puedes hacer algo </span>
				<span class="text-yellow-800 dark:text-yellow-200 font-semibold">
					increíble,
				</span>
				<span> ¿por qué conformarte con menos? Es simple: da siempre el máximo; es todo o nada.</span>
			</h2>
			<nav class="flex gap-3 mt-6 flex-wrap justify-center">
				<SocialPill href="http://linkedin.com/in/eliseo-arevalo">
					<LinkedInIcon class="size-4" />
					LinkedIn
				</SocialPill>
				<SocialPill href="https://github.com/eliseo-arevalo">
					<GitHubIcon class="size-4" />
					GitHub
				</SocialPill>
			</nav>
				</div>
			</div>
		</SectionContainer>

		<SectionContainer id="experiencia">
			<h2
				class="text-3xl font-semibold mb-6 flex gap-x-3 items-center text-black/80 dark:text-white/80"
			>
				<Briefcase class="size-7" />
				Experiencia laboral
			</h2>
			<Experience />
		</SectionContainer>

		<SectionContainer id="proyectos">
			<h2
				class="text-3xl font-semibold mb-6 flex gap-x-3 items-center text-black/80 dark:text-white/80"
			>
				<CodeIcon class="size-7" />
				Proyectos
			</h2>
			<Projects />
		</SectionContainer>

		<div class="hidden dark:block">
			<GradualBlur
				client:load
				target="page"
				position="bottom"
				height="6rem"
				strength={1}
				divCount={5}
				curve="bezier"
				exponential={false}
				opacity={0.5}
				preset="page-footer"
			/>
		</div>

		<SectionContainer id="sobre-mi">
			<h2
				class="text-3xl font-semibold mb-6 flex gap-x-3 items-center text-black/80 dark:text-white/80"
			>
				<ProfileCheck class="size-7" />
				Sobre mí
			</h2>
			<AboutMe />
		</SectionContainer>

		<!-- Spotify Widget -->
		<div class="w-full px-4 mt-6">
			<div class="w-full mx-auto max-w-md">
				<iframe 
					src="https://open.spotify.com/embed/track/0pxPNTroZcxXA0w6IDgMQJ?utm_source=generator&theme=0" 
					width="100%" 
					height="152" 
					frameborder="0"
					allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
					loading="lazy"
					style="border-radius: 12px;"
				></iframe>
			</div>
		</div>
	</main>

	<script>
		// Cambiar tema del widget de Spotify según el tema del sitio
		function updateSpotifyTheme() {
			const iframe = document.querySelector('iframe[src*="spotify.com"]');
			if (!iframe) return;
			
			const isDark = document.documentElement.classList.contains('dark');
			const newTheme = isDark ? '0' : '1';
			const currentSrc = iframe.src;
			
			if (currentSrc.includes(`theme=${newTheme}`)) return;
			
			iframe.src = currentSrc.replace(/theme=[01]/, `theme=${newTheme}`);
		}
		
		// Observar cambios en el tema
		const observer = new MutationObserver(updateSpotifyTheme);
		observer.observe(document.documentElement, { 
			attributes: true, 
			attributeFilter: ['class'] 
		});
		
		updateSpotifyTheme();
	</script>
</Layout>
